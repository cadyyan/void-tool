---
services:
  backend:
    image: cadyyan/void-tool:dev

    build:
      context: .

    develop:
      watch:
        - action: rebuild
          path: .

    environment:
      VOID_LOGGING_LEVEL: debug
      VOID_SQLITE_PATH: /srv/void-tool.db
      VOID_RS_DATADIR: /mnt/void
      VOID_RS_POLLFREQUENCY: 30s

    volumes:
      - type: volume
        source: void_tool_data
        target: /srv

      - type: volume
        source: void_data
        target: /mnt/void
        read_only: true

    ports:
      - name: http
        protocol: tcp
        target: 8080
        published: 8080

volumes:
  void_tool_data:

  void_data:
    name: runescape_void_data
    external: true
